<div class="card h-100 shadow-sm">
    <div class="card-body d-flex flex-column flex-md-row gap-3 align-items-start">
        <img [src]="repo.owner.avatar_url" alt="avatar" class="rounded-circle" width="64" height="64">

        <div class="flex-grow-1 text-truncate">
            <h5 class="card-title mb-1 text-truncate" [title]="repo.full_name">{{ repo.full_name }}</h5>
            <p class="card-text text-muted small mb-2" *ngIf="repo.description" [title]="repo.description"
                class="text-truncate">
                {{ repo.description }}
            </p>
            <div class="d-flex flex-wrap gap-3 align-items-center small text-secondary">
                <span title="Stars">⭐ {{ repo.stargazers_count }}</span>
                <span *ngIf="repo.language">{{ repo.language }}</span>
                <a class="text-decoration-none" [href]="repo.html_url" target="_blank" rel="noopener">Open ↗</a>
            </div>
        </div>

        <div class="mt-2 mt-md-0 ms-md-3 flex-shrink-0">
            <button class="btn btn-sm d-flex align-items-center gap-1"
                [ngClass]="bookmarked ? 'btn-danger' : 'btn-outline-primary'" (click)="toggleBookmark.emit(repo)">
                <i class="bi" [ngClass]="bookmarked ? 'bi bi-bookmark-fill' : 'bi bi-bookmark'"></i>
                {{ bookmarked ? 'Remove' : 'Mark' }}
            </button>
        </div>
    </div>
</div>